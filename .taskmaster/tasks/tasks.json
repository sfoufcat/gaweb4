{
  "master": {
    "tasks": [
      {
        "id": "25",
        "title": "Extend Task Schema with Source Tracking Fields",
        "description": "Add new fields to existing Task model to track source information and visibility without breaking existing functionality",
        "details": "Extend the existing Task interface/model with: sourceType ('client' | 'program_day' | 'program_week' | 'coach_manual'), sourceProgramId (nullable string), sourceProgramDayId (nullable string), sourceWeekId (nullable string), assignedByCoachId (nullable string), visibility ('public' | 'private'), clientLocked (boolean). Set appropriate defaults: sourceType='client', visibility='private' for client tasks, clientLocked=false. Ensure database migration handles existing records gracefully with defaults.",
        "testStrategy": "Unit tests for schema validation, integration tests ensuring existing tasks work with new fields, verify defaults are applied correctly for existing records",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:17:07.315Z"
      },
      {
        "id": "26",
        "title": "Implement Program Day Calculation Logic",
        "description": "Create utility function to calculate program day number from enrollment date and calendar date",
        "details": "Implement calculateProgramDay(enrollmentStartDate: Date, targetDate: Date, includeWeekends: boolean): number function. Use existing enrollment progress calculation logic. Handle weekend skipping based on includeWeekends setting. Account for enrollment start date and map calendar dates to program day numbers correctly.",
        "testStrategy": "Unit tests with various date scenarios, weekend skipping validation, edge cases around enrollment start dates, verify consistency with existing enrollment logic",
        "priority": "high",
        "dependencies": [
          "25"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:17:07.317Z"
      },
      {
        "id": "27",
        "title": "Create Program Task Retrieval Function",
        "description": "Build function to fetch appropriate program tasks for a given program day",
        "details": "Implement getProgramTasksForDay(programId: string, programDay: number): Promise<Task[]>. Priority logic: day-level tasks override weekly tasks when present. For weekly tasks, apply distribution mode (repeat daily OR spread across week). Return tasks with proper source metadata (sourceType, sourceProgramId, etc.).",
        "testStrategy": "Unit tests for day vs weekly task priority, weekly distribution modes, verify correct source metadata assignment, test with various program configurations",
        "priority": "high",
        "dependencies": [
          "26"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:17:07.318Z"
      },
      {
        "id": "28",
        "title": "Implement Core Sync Function",
        "description": "Create the main syncProgramTasksToClientDay function with fill-empty and override modes",
        "details": "Implement syncProgramTasksToClientDay with parameters: userId, programEnrollmentId, date, mode ('fill-empty' | 'override-program-sourced'). fill-empty mode: only add tasks to empty slots, never override existing. override-program-sourced mode: replace only program/coach sourced tasks, preserve client tasks. Respect max Daily Focus limit (3 or org-configured), send excess to backlog. Set visibility='public' for program tasks.",
        "testStrategy": "Integration tests for both sync modes, verify client tasks never overwritten, test max task limit enforcement, validate proper source field assignment",
        "priority": "high",
        "dependencies": [
          "27"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:19:45.869Z"
      },
      {
        "id": "29",
        "title": "Add Client Lock Protection Logic",
        "description": "Implement clientLocked field logic to prevent sync overwrites of user-modified tasks",
        "details": "Add logic to set clientLocked=true when client edits or deletes program-sourced tasks. Update sync function to skip tasks where clientLocked=true. Implement in task update/delete endpoints. Ensure program tasks can still be synced if not client-locked.",
        "testStrategy": "Unit tests for clientLocked flag setting, integration tests ensuring locked tasks are preserved during sync, verify unlock behavior when appropriate",
        "priority": "medium",
        "dependencies": [
          "28"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:19:45.870Z"
      },
      {
        "id": "30",
        "title": "Wire Sync Triggers to Coach Program Editor",
        "description": "Add sync function calls to coach program save operations",
        "details": "Add sync triggers: On Save Day template - sync today + 7 days for all active enrollments using fill-empty mode. On Save Week template - sync affected week days for all enrollments using fill-empty mode. On Save Day per-client override - immediate sync for that client using override-program-sourced mode. Include today if edited day corresponds to client's current day.",
        "testStrategy": "Integration tests for each save scenario, verify correct sync mode usage, test multi-client template syncing, validate immediate per-client sync",
        "priority": "high",
        "dependencies": [
          "29"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:24:45.611Z"
      },
      {
        "id": "31",
        "title": "Implement Task Visibility Toggle for Clients",
        "description": "Ensure client task creation and editing supports public/private visibility toggle",
        "details": "Verify/implement visibility toggle in client task create/edit UI and API endpoints. Default to 'private' for client-created tasks. Allow clients to change visibility between public/private. Update task forms and API validation to handle visibility field.",
        "testStrategy": "UI tests for visibility toggle, API tests for visibility field validation, verify default behavior for new client tasks",
        "priority": "medium",
        "dependencies": [
          "25"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:27:07.996Z"
      },
      {
        "id": "32",
        "title": "Create Coach Task Filtering API",
        "description": "Implement API endpoints for coaches to view client tasks with proper visibility filtering",
        "details": "Create/update coach API endpoints to return: all program/coach tasks + client tasks where visibility='public'. Filter out private client tasks. Include task source information and completion status. Ensure real-time updates for task status changes.",
        "testStrategy": "API tests for visibility filtering, verify private tasks are excluded, test real-time status updates, validate source information inclusion",
        "priority": "medium",
        "dependencies": [
          "31"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:29:50.734Z"
      },
      {
        "id": "33",
        "title": "Update Coach Program Client View",
        "description": "Add Today's Tasks section to coach's program client view showing task completion status",
        "details": "Add 'Today's Tasks' section in coach program client view. Display tasks with completion status, source indicators (program vs client-created), and real-time updates. Show task titles, completion checkboxes (read-only for coach), and source badges.",
        "testStrategy": "UI tests for task display, verify completion status accuracy, test source indicator display, validate real-time updates",
        "priority": "medium",
        "dependencies": [
          "32"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:32:53.529Z"
      },
      {
        "id": "34",
        "title": "Enhance Client Details View for Coaches",
        "description": "Update client details view to show comprehensive task status and source information",
        "details": "Enhance existing client details view with task status section. Show daily task overview, completion rates, source breakdown (program vs client tasks). Include filtering options for task types and date ranges. Maintain existing functionality while adding task insights.",
        "testStrategy": "UI tests for enhanced details view, verify task status accuracy, test filtering functionality, ensure existing features remain intact",
        "priority": "medium",
        "dependencies": [
          "33"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:33:50.114Z"
      },
      {
        "id": "35",
        "title": "Implement Graceful Legacy Data Handling",
        "description": "Ensure application handles both old and new task record formats without migration scripts",
        "details": "Add null-safe handling for new fields in all read operations. Implement default value logic: sourceType='client' if missing, visibility='private' for existing client tasks, clientLocked=false if missing. Update all task queries and display logic to handle missing fields gracefully.",
        "testStrategy": "Integration tests with mixed old/new task records, verify default value application, test all task display scenarios with legacy data",
        "priority": "medium",
        "dependencies": [
          "25"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:34:24.717Z"
      },
      {
        "id": "36",
        "title": "Add Max Task Limit Enforcement",
        "description": "Implement Daily Focus task limit enforcement with backlog overflow handling",
        "details": "Implement max task limit checking (default 3 or org-configured). When sync would exceed limit, move excess tasks to backlog. Prioritize program tasks over client tasks when at limit. Add configuration for per-organization task limits. Handle limit changes gracefully.",
        "testStrategy": "Unit tests for limit enforcement, test backlog overflow behavior, verify task prioritization logic, test org-specific limit configurations",
        "priority": "medium",
        "dependencies": [
          "28"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:34:24.718Z"
      },
      {
        "id": "37",
        "title": "Create Sync Result Reporting System",
        "description": "Implement comprehensive sync result tracking and error handling",
        "details": "Create SyncResult interface with success/failure counts, error details, and affected task IDs. Add logging for sync operations. Implement retry logic for failed syncs. Create monitoring dashboard for sync health. Handle partial sync failures gracefully.",
        "testStrategy": "Unit tests for result tracking, integration tests for error scenarios, verify logging functionality, test retry mechanisms",
        "priority": "low",
        "dependencies": [
          "36"
        ],
        "status": "deferred",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:34:35.463Z"
      },
      {
        "id": "38",
        "title": "Add Real-time Task Status Updates",
        "description": "Implement WebSocket or polling mechanism for real-time task completion status updates",
        "details": "Implement real-time updates for task completion status between coach and client views. Use WebSocket connections or optimized polling. Update coach views immediately when client marks tasks complete. Handle connection failures and reconnection gracefully.",
        "testStrategy": "Integration tests for real-time updates, test WebSocket connection handling, verify update propagation speed, test offline/reconnection scenarios",
        "priority": "low",
        "dependencies": [
          "34"
        ],
        "status": "deferred",
        "subtasks": [],
        "updatedAt": "2026-01-07T17:34:35.464Z"
      },
      {
        "id": "39",
        "title": "Comprehensive Integration Testing and Validation",
        "description": "Execute end-to-end testing of complete two-way sync functionality",
        "details": "Comprehensive testing of entire sync flow: coach edits → immediate client sync, client task visibility → coach views, completion status updates, edge cases with weekend skipping, multiple enrollment scenarios, concurrent edit handling, performance testing with large task volumes.",
        "testStrategy": "End-to-end test scenarios covering all user stories, performance testing, concurrent user testing, edge case validation, regression testing for existing functionality",
        "priority": "high",
        "dependencies": [
          "37",
          "38"
        ],
        "status": "pending",
        "subtasks": []
      }
    ],
    "metadata": {
      "version": "1.0.0",
      "lastModified": "2026-01-07T17:34:35.464Z",
      "taskCount": 15,
      "completedCount": 12,
      "tags": [
        "master"
      ]
    }
  }
}